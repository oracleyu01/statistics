

🎯 예제42. 데이터 시각화6 (박스 그래프)

  평균값과 중앙값과 최빈값만으로는 데이터 분석을 하기 부족한 경우가
  있습니다. 평균 데이터는 데이터의 중심이 어디즘인지는 알려주지만
  특정 데이터가 평균을 중심으로 어떻게 분포가 되어 있는지는
  알려주지 않습니다. 그래서 범위와 사분위수 범위를 알아야합니다. 
  박스 그래프는 사분위수 범위에 대한 데이터 분포를 볼 수 있는 그래프입니다.

➡️  문법1.  아래의 3명의 선수 득점 점수의 평균값, 중앙값, 최빈값을 구하시오!

 질문 :  어느 농군단의 감독이 아래의 3명의 농구선수중 한명을
          선택하려한다. 아래의 3명의 선수의 게임별 점수(득점)
          를 가지고 한명을 고른다면 어떤 선수는 골라야하나 ? 

 각각의 게임당 득점한 점수  

x1 <- c(7,8,9,9,10,10,11,11,12,13)
x2 <- c (7,9,9,10,10,10,10,11,11,13 )
x3 <- c(3,3,6,7,7,10,10,10,11,13,30 )

R>







설명:  중앙값, 평균값, 최빈값이 다 동일해서 특정 선수를 선택하기가 어렵습니다.
        이럴때는 각 선수의 점수가 어떻게 분포되어 있는지 분포방식을 측정하면
        결정을 내리는데 도움이 될 수 있습니다. 

데이터의 분포 방식을 확인하는 방법이 "범위", "사분위수 범위"  입니다.

➡️ 문법2.  3명의 선수의 점수의 범위를 구하시오 !

R>





 범위는 그 자체로 데이터의 폭만 설명할 뿐 그안에서 데이터가
 분포되는 방식은 설명해주지 않습니다. 
 특히 이상치에 민감합니다.
 3번째 선수 같은 경우는 어쩌다 한번 잘한 게임(30점) 의 이상치 때문에
 범위가 넓어져 버리게 되었습니다. 그래서 분석하기가 어려워졌습니다.
 그래서 이상치로 부터 멀어질 필요가 있습니다.

 이거를 사분위수 범위로 해결할 수 있습니다.

➡️ 문법3.  3번째 선수의 점수 데이터로 4분위수 그래프를 그리시오 !






➡️ 문법4. 위와 같은 값들 구하는 이유가 무엇인가 ? 

 답:  



😊 세명의 선수의 점수 데이터를 하나의 화면으로 박스 그래프를 그리시오

R>


설명: 그래프를 보면 1번,2번 선수가 3번 선수보다 상대적으로 좁은 사분위수 범위를
       가지고 있습니다. 3번선수는 넓은 범위를 가지고 있고 1,2번 선수에 비해서
       훨씨 높은점수(30점)을 득점했지만 다른 경우에는 훨씬 낮은 점수에 
        대한 기록도 보입니다.  
       그래서 1,2번 선수가 3번 선수에 비해서 점수가 더 일관성이 있고
       대부분의 경우 3번 선수보다 더 높은 점수를 기록하고 있습니다. 


😊문제1. 중고차 가격 데이터로 사분위수 그래프를 그려서 이상치가 존재하는지
            확인하시오 !





데이터 분석하기 전에 반드시 분석하고자하는 숫자 데이터의 이상치가 있는지
확인을 하고 시작해야합니다.

내가 원하는 데이터 분석 결과가 안나오면 이상치를 제거하고 다시 분석해야합니다.
이상치를 제거했을때와 제거하지 않았을때를 비교해봐야합니다.

예: 서울시 물가 데이터중에 배추가격 

😊문제2. 중고차 가격의 IQR (사분위수 범위) 를 구하시오!





     0%       25%     50%       75%         100% 
 3800.0   10995.0   13591.5   14904.5   21992.0 
                ↑          ↑         ↑
               Q1          Q2        Q3
       하한 사분위수   중앙값    상한 사분위수

  IQR ? Q1 과 Q3 의 차이인 사분위수 범위

 IQR(usedcars$price)  # 3909.5

    14904.5 - 10995.0 =   3909.5

➡️ 문법5.  위의 농구선수 데이터를 plotly 그래프로 그리시오 !

library(plotly)

# 데이터 정의
x1 <- c(7, 8, 9, 9, 10, 10, 11, 11, 12, 13)
x2 <- c(7, 9, 9, 10, 10, 10, 10, 11, 11, 13)
x3 <- c(3, 3, 6, 7, 7, 10, 10, 10, 11, 13, 30)

# x1 데이터의 박스 플롯 생성


# x2 데이터의 박스 플롯 생성


# x3 데이터의 박스 플롯 생성


# 서브플롯으로 합치기


# 레이아웃 업데이트


# 그래프 표시


😊문제1.  타이타닉의 나이(age) 데이터를 가지고  plotly 로 박스 그래프를 그리시오 !

library(plotly)

# 데이터 정의


# x1 데이터의 박스 플롯 생성


# 그래프 표시


➡️  문법6.  기존의 사분위 그래프에 좀더 advanced 한 결과를 볼 수 있는 그래프를
               그리시오 !

1. 박스 플롯

# 데이터 정의
set.seed(123)
x1 <- c(rnorm(100, mean = 50, sd = 10), 150)  # 이상치 포함
x2 <- c(rnorm(100, mean = 60, sd = 15), 200)  # 이상치 포함
x3 <- c(rnorm(100, mean = 55, sd = 12), 250)  # 이상치 포함

# 박스 플롯 생성


박스 그래프로 확인할 수 있는 내용은  중앙값, 1사분위수값, 3사분위수값, 최소값,
최대값, 이상치등을 확인할 수 있습니다. 

2. 바이올린 플롯 

 박스 플롯의 장점에 데이터의 밀도를 추가로 제공하는 그래프입니다. 
 폭이 넓을 수록 밀도가 높은것 입니다.

# 패키지 설치 및 로드



# 데이터 프레임 생성



# 바이올린 플롯 생성
ggplot(data, aes(x = group, y = value, fill = group)) +
  geom_violin(trim = FALSE) +
  geom_boxplot(width = 0.1, fill = "white") +
  labs(title = "Violin Plot of x1, x2, and x3", x = "Group", y = "Value") +
  theme_minimal()

설명: fill = group 은 색상을 그룹별 채워라 !
       geom_violin(trim = FALSE) 이 바이올릿 플롯을 그리는 함수 
        trim = FALSE  꼬리를 자르지 않고 출력해라 !
       geom_boxplot(width = 0.1, fill = "white")  은 박스 플롯의 넓이와 색깔
       theme_minimal() 은 그래프의 테마를 미니멀한 스타일로 설정하여 깔끔하게 출력

3. 빅캔들 플롯

 바이올린 플롯보다 밀도와 분포를 더 세밀하게 보여줍니다.

# 패키지 설치 및 로드




# 빅캔들 플롯 생성



😊문제1.  타이타닉의 나이 데이터를 바이올린 플롯 그래프 그려서 나이별 밀도도
             확인하시오 !

library(ggplot2)

# 데이터 불러오기



# 바이올린 플롯 생성




