# 예제52: 가설검정2 - 단일 모집단의 모평균 검정
## - 분산을 모르는 경우(t 검정)

### 📊 가설검정의 유형
![가설검정의 유형](그림11.png)
![가설검정의 유형](table1.png)

## 1️⃣ 이론 설명

### t 검정이란?
- 모집단의 분산(σ²)을 모르는 경우에 사용하는 검정 방법
- 표본의 표준편차(s)를 사용
- 검정통계량은 자유도가 (n-1)인 t분포를 따름

### 검정통계량
$$t = \frac{\bar{X} - \mu_0}{s/\sqrt{n}}$$

여기서:
- $\bar{X}$ : 표본평균
- $\mu_0$ : 귀무가설에서의 모평균
- $s$ : 표본표준편차
- $n$ : 표본의 크기

## 2️⃣ 예제 풀이

### 📌 문제 상황
A회사는 자사의 에너지 음료가 평균적으로 200mg의 카페인을 함유하고 있다고 주장한다. 
이를 검증하기 위해 무작위로 25개의 제품을 선택하여 카페인 함량을 측정했더니, 
표본평균이 195mg이고 표본표준편차가 10mg으로 나타났다. 
유의수준 5%에서 회사의 주장이 옳다고 할 수 있는가?

### 풀이 과정

1. 가설 설정
```
H₀: μ = 200 (회사의 주장이 맞다)
H₁: μ ≠ 200 (회사의 주장이 틀리다)
```

2. 검정통계량 계산
```r
# 데이터 설정
mu0 <- 200      # 귀무가설의 평균
xbar <- 195     # 표본평균
s <- 10         # 표본표준편차
n <- 25         # 표본크기
alpha <- 0.05   # 유의수준

# t 통계량 계산
t_stat <- (xbar - mu0)/(s/sqrt(n))
print(paste("t 통계량:", round(t_stat, 3)))

# 자유도와 임계값
df <- n - 1
t_crit <- qt(1-alpha/2, df)
print(paste("임계값: ±", round(t_crit, 3)))

# p-value 계산 (양측검정)
p_value <- 2 * pt(abs(t_stat), df, lower.tail=FALSE)
print(paste("p-value:", round(p_value, 4)))

# 결과 시각화
curve(dt(x, df), from=-4, to=4, 
      main="t분포와 검정통계량",
      ylab="밀도", xlab="t")
abline(v=c(-t_crit, t_crit), col="red", lty=2)
abline(v=t_stat, col="blue", lwd=2)
legend("topright", 
       legend=c("임계값", "검정통계량"), 
       col=c("red", "blue"), 
       lty=c(2, 1))
```

3. 결론 도출
- t 통계량 = -2.5
- 자유도 24에서의 임계값 = ±2.064
- p-value = 0.0196 < 0.05
- 따라서 귀무가설을 기각하고, 회사의 주장이 틀렸다고 할 수 있다.

## 3️⃣ 연습문제

<details>
<summary><b>🎯 문제</b></summary>

한 학급의 수학 성적이 평균 70점 이상이라고 주장한다. 
이를 검증하기 위해 이 학급에서 16명을 무작위로 선발하여 시험을 보았더니 
평균이 68점, 표준편차가 5점이었다. 
유의수준 5%에서 이 주장이 옳다고 할 수 있는가?

1) 가설을 설정하시오
2) 검정통계량을 계산하시오
3) 결론을 내리시오
4) R코드로 분석하시오
</details>

<details>
<summary><b>✍️ 정답</b></summary>

1) 가설 설정 (좌측검정)
   - H₀: μ ≥ 70
   - H₁: μ < 70

2) 검정통계량
   $$t = \frac{68 - 70}{5/\sqrt{16}} = -1.60$$

3) α = 0.05, 자유도 = 15일 때 임계값 = -1.753
   |-1.60| < 1.753이므로 귀무가설 기각 실패

4) R코드
```r
mu0 <- 70       # 귀무가설의 평균
xbar <- 68      # 표본평균
s <- 5          # 표본표준편차
n <- 16         # 표본크기
alpha <- 0.05   # 유의수준
df <- n - 1     # 자유도

# t 통계량 계산
t_stat <- (xbar - mu0)/(s/sqrt(n))

# 좌측검정의 임계값
t_crit <- qt(alpha, df)

# p-value 계산 (좌측검정)
p_value <- pt(t_stat, df)

# 결과 출력
print(paste("t 통계량:", round(t_stat, 3)))
print(paste("임계값:", round(t_crit, 3)))
print(paste("p-value:", round(p_value, 4)))
```
</details>

> 💡 **핵심 포인트**
> - t 검정은 모분산을 모를 때 사용합니다
> - 자유도는 표본크기보다 1이 작습니다 (n-1)
> - 표본크기가 작을 때(n<30)는 특히 t 검정이 중요합니다
> - 단측/양측 검정에 따라 임계값과 p-value 계산이 달라집니다
